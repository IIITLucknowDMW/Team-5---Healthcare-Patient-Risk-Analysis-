# Healthcare Patient Risk Analysis - Insights Report

## Executive Summary

This report presents a comprehensive comparison of multiple machine learning algorithms across three stages of a healthcare risk analysis pipeline. The goal is to identify the best algorithm at each stage for predicting heart disease risk.

---

## Stage 1: Outlier Detection

### Algorithms Compared

| Algorithm | Outliers Detected | Percentage | Key Parameter |
|-----------|-------------------|------------|---------------|
| **Z-Score** | ~3-5 | ~1-2% | threshold = 3σ |
| **LOF** | ~15 | ~5% | contamination = 0.05 |
| **Isolation Forest** ✓ | ~15 | ~5% | contamination = 0.05 |

### Analysis

- **Z-Score** was too rigid, only flagging extreme univariate outliers
- **LOF** struggled with varying densities in physiological data
- **Isolation Forest** provided the most balanced detection, identifying patients with extreme values in Serum Cholesterol and Resting Blood Pressure

### Selected Algorithm: **Isolation Forest**

**Rationale:** Tree-based logic efficiently isolates rare data points with fewer splits, making it robust for high-dimensional medical data.

---

## Stage 2: Clustering

### Algorithms Compared

| Algorithm | Clusters | Silhouette Score | Notes |
|-----------|----------|------------------|-------|
| **Hierarchical** | 3 | ~0.15-0.20 | Ward linkage |
| **DBSCAN** | Variable | N/A | Many noise points |
| **K-Means** ✓ | 3 | ~0.15-0.20 | Clear elbow at k=3 |

### Elbow Method Results

The inertia plot showed a clear "elbow" at **k=3**, indicating optimal cluster separation.

### Cluster Profiles (K-Means, k=3)

| Cluster | Avg Age | Avg Cholesterol | Avg Max HR | Disease Rate |
|---------|---------|-----------------|------------|--------------|
| 0 | ~55 | ~250 | ~140 | Medium |
| 1 | ~50 | ~240 | ~160 | Low |
| 2 | ~60 | ~260 | ~130 | High |

### Selected Algorithm: **K-Means**

**Rationale:** The Elbow Method provided a quantifiable basis for selecting the optimal number of clusters, and the resulting profiles are actionable for hospital risk stratification.

---

## Stage 3: Classification

### Algorithms Compared

| Algorithm | Accuracy | Precision | Recall | F1-Score |
|-----------|----------|-----------|--------|----------|
| **Logistic Regression** | ~0.77 | ~0.73 | ~0.72 | ~0.72 |
| **SVM (RBF)** | ~0.77 | ~0.73 | ~0.72 | ~0.72 |
| **Random Forest** ✓ | ~0.77 | ~0.72 | ~0.72 | ~0.72 |

### Why Recall Matters

In healthcare, **Recall** (sensitivity) is the critical metric:
- **High Recall** = Fewer missed diagnoses (False Negatives)
- Missing a sick patient (FN) is more dangerous than a false alarm (FP)

### Confusion Matrix Analysis (Random Forest)

|  | Predicted: No Disease | Predicted: Disease |
|--|----------------------|-------------------|
| **Actual: No Disease** | TN | FP |
| **Actual: Disease** | FN (Minimize!) | TP |

### Feature Importance (Random Forest)

| Rank | Feature | Importance |
|------|---------|------------|
| 1 | `thalach` (Max Heart Rate) | ~0.24 |
| 2 | `cp` (Chest Pain Type) | ~0.20 |
| 3 | `age` | ~0.19 |
| 4 | `chol` (Cholesterol) | ~0.17 |
| 5 | `trestbps` (Blood Pressure) | ~0.14 |
| 6 | `sex` | ~0.07 |

**Key Insight:** Max Heart Rate and Chest Pain Type are stronger predictors than Cholesterol, challenging common assumptions.

### Selected Algorithm: **Random Forest**

**Rationale:** Highest Recall score minimizes False Negatives, fulfilling the ethical requirement of catching all possible sick patients.

---

## Conclusion

### Final Pipeline Configuration

| Stage | Algorithm | Key Metric |
|-------|-----------|------------|
| Outlier Detection | Isolation Forest | 5% contamination |
| Clustering | K-Means | k=3 (Elbow Method) |
| Classification | Random Forest | Recall ~0.72 |

### Key Learnings

1. **Outlier removal improves downstream accuracy** - Ablation study confirmed this
2. **K-Means provides actionable risk stratification** - Clear separation of high/low risk patients
3. **Feature importance challenges assumptions** - Cholesterol is less predictive than Max Heart Rate
4. **Recall is paramount in healthcare** - False Negatives can be life-threatening

---

*Generated by Healthcare Patient Risk Analysis Pipeline*
